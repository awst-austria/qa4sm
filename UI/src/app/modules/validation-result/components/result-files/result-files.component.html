<div *ngIf="validation.progress === 100" class="p-grid no-gutters">
  <div *ngIf="updatedMetrics$|async as metrics" class="p-col-12">
    <p-panel>
      <ng-template pTemplate="header">
        <div class="text-center" style="width: 95%">
          <h4 class="my-0 py-0 font-weight-normal">Result files</h4>
        </div>
      </ng-template>
      <ng-template pTemplate="icons">
      </ng-template>

      <div class="p-grid p-align-center">
        <div [ngClass]="{'p-col-5': numOfOverviewPlots === 1, 'p-col-6': numOfOverviewPlots > 1}">
          <img *ngIf="metrics[indx].boxplotFile|async as boxplot"
               width="95%"
               height="95%"
               [src]="(plotPrefix+boxplot)"
               (click)="showBoxplot(plotPrefix+boxplot)"
               [ngClass]="{'result-plot':true, 'pcol': numOfOverviewPlots > 4}">
        </div>
        <div class="p-col">
          <div class="p-grid">
            <div *ngFor="let overviewPlot of metrics[indx].overviewFiles; let ind = index"
                 [ngClass]="{'p-col': numOfOverviewPlots === 1, 'p-col-10': numOfOverviewPlots === 2, 'p-col-6': numOfOverviewPlots > 2}">
              <img *ngIf="overviewPlot|async as plot" width="95%" height="95%"
                   [src]="plotPrefix+plot"
                   (click)="showOverviewPlotsGallery(ind)"
                   [ngClass]="{'result-plot':true, 'pcol': numOfOverviewPlots === 2, 'pcol6': numOfOverviewPlots > 2}">
            </div>
          </div>
        </div>

      </div>
      <div class="p-grid  p-align-center">
        <div class="p-col-3">
          <button type="button"
                  style="width: 9rem;"
                  class="btn btn-sm btn-primary"
                  title="Download graphs .zip"
                  (click)="downloadResultFile(validation.id, 'graphics',validation.id + '_graphs.zip')">
            <span class="pi pi-download"></span> Download graphs
          </button>
        </div>
        <div class="p-col">
          <span class="p-float-label p-mb-4 p-mt-3">
            <p-dropdown id="metricSelector"
                        (onChange)="onMetricChange()"
                        [options]="metrics"
                        [(ngModel)]="selectedMetrics"
                        optionLabel="metric_pretty_name"
                        [style]="{'width': '100%'}">
            </p-dropdown>
          </span>
        </div>
        <div class="p-col-3 px-0">
          <button type="button"
                  style="width: 9rem;"
                  class="btn btn-sm btn-primary"
                  title="Download all results in NetCDF format"
                  (click)="downloadResultFile(validation.id, 'netCDF', validation.output_file_name)">
            <span><fa-icon [icon]="faIcons.faFileDownload"></fa-icon></span> Download NetCDF
          </button>
        </div>
      </div>

    </p-panel>
  </div>
</div>
