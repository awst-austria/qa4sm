<p-panel [toggleable]="true" class="side-panel" collapsed="true">
  <ng-template pTemplate="header">
    <div class="side-menu-header my-3 ml-2">
      Filter validations
      <span class="pi pi-question-circle"
            pTooltip="Select filter from the list.">
      </span>
    </div>
  </ng-template>

  <span class="p-float-label mb-1">
          <p-dropdown
            id="filterVarSelector"
            [options]="FILTER_CONFIGS"
            [(ngModel)]="selectedFilter"
            placeholder="Select a filter"
            optionLabel="label"
            [style]="{'width': '100%'}">
          </p-dropdown>
          <label for="{{'filterVarSelector'}}">Select a filter</label>
    </span>

  <!--  -->
  <ng-container *ngIf="selectedFilter" [ngSwitch]="selectedFilter.type" class="lg:w-4 w-12" id="filterParamSelector">
    <p-multiSelect *ngSwitchCase="'multi-select'"
                   [options]="selectedFilter.options|async"
                   [(ngModel)]="selectedFilter.selectedOptions"
                   [placeholder]="selectedFilter.optionPlaceHolder"
                   [filter]="true"
                   (onChange)="updateFilters()"
                   showHeader="false"
                   [style]="{'width': '100%'}"/>

    <input pInputText
           *ngSwitchCase="'string'"
           [(ngModel)]="selectedFilter.value"
           [placeholder]="selectedFilter.optionPlaceHolder"
           [style]="{'width': '100%'}"/>

    <p-calendar *ngSwitchCase="'date'"
                [(ngModel)]="selectedFilter.value"
                dateFormat="dd/mm/yy"
                selectionMode="range"
                [inputStyle]="{'width': '100%'}"
                [placeholder]="selectedFilter.optionPlaceHolder">
    </p-calendar>
    <div class="flex flex-column w-12" *ngIf="!(selectedFilter.type==='multi-select')">
      <p-button
        [style]="{'width': '100%'}"
        styleClass="p-button-outlined p-button-primary"
        label="Add option"
        pTooltip="Click to add value to the selected filter"
        [disabled]="!selectedFilter.value"
        (onClick)="addOption()">
      </p-button>
    </div>
  </ng-container>

  <p-fieldset *ngIf="validationFilters().length" legend="Selected Filters">
    <div class="flex md:flex-column flex-row align-content-start justify-content-center p-0">
      <p-chip
        class="flex w-12"
        *ngFor="let filter of validationFilters()"
        [pTooltip]=""
        [removable]="true"
        (onRemove)="removeFilter(filter)">
        <div class="mr-2">
          {{ filter.label }}
        </div>
        <div *ngIf="filter.selectedOptions.length"
             class="flex md:flex-column flex-row align-content-start justify-content-center p-0">
          <p-chip *ngFor="let option of filter.selectedOptions"
                  [label]="option"
                  [removable]="true"
                  (onRemove)="removeOption(filter, option)"/>
        </div>
      </p-chip>
    </div>
  </p-fieldset>

  <div
    class="mt-3 flex flex-row lg:flex-nowrap column-gap-1 justify-content-center align-content-center w-12">
    <div class="flex flex-column w-6">
      <p-button
        [style]="{'width': '100%'}"
        label="Cancel"
        icon="pi pi-ban"
        pTooltip="Remove all"
        (onClick)="cleanFilters()">
      </p-button>
    </div>
<!--    <div class="flex flex-column w-6">-->
<!--      <p-button-->
<!--        [style]="{'width': '100%'}"-->
<!--        styleClass="p-button-outlined p-button-warning"-->
<!--        label="Apply Filters"-->
<!--        pTooltip="Click to apply all"-->
<!--        (onClick)="filterValidations()">-->
<!--      </p-button>-->
<!--    </div>-->

  </div>
</p-panel>

